/* Source and licensing information for the line(s) below can be found at https://www.helmerinc.com/themes/custom/helmer_web/js/product_comparison.js. */
function ProductComparison(){'use strict';this.comparisonItems=[];this.backlink=null;}
(function($){ProductComparison.GetHeaders=function(callback){var req=new XMLHttpRequest();req.open('GET','/api/recent-product',true);req.send(null);req.onreadystatechange=function(){if(this.readyState==this.HEADERS_RECEIVED){var headers=this.getAllResponseHeaders();var arr=headers.trim().split(/[\r\n]+/);var headerMap={};arr.forEach(function(line){var parts=line.split(': ');var header=parts.shift();var value=parts.join(': ');headerMap[header]=value;});callback(headerMap);}};};ProductComparison.prototype.Initialize=function(containerElement){var thisObj=this;this.comparisonItems=this.getComparisonList();$(containerElement).find('.js-product-compare').each(function(){var thisE=$(this);var productType=thisE.attr('data-product-type');var productId=thisE.attr('data-product-id');if(productType!=='processing_equipment'&&productType!=='cold_storage'){return;}
thisObj.displayCompareButton(thisE);});thisObj.displayComparePageLink();$(containerElement).on('click','.js-product-compare',function(e){var linkElement=$(this);thisObj.addRemoveCompare(linkElement);});};ProductComparison.prototype.InitializeComparisonPage=function(containerElement){var thisObj=this;this.comparisonItems=this.getComparisonList();var querystring=this.getUrlVars();if(querystring["search-url"]){this.backlink=querystring["search-url"];}else{this.backlink=document.referrer;}
$(containerElement).find('.js-product-compare').text(Drupal.t("Remove from Comparison"));$(containerElement).on("click",".js-product-compare",function(e){e.preventDefault();var productId=$(this).attr('data-product-id');thisObj.RemoveItemComparisonPage(productId);});$(containerElement).on("click",".back-button",function(e){thisObj.BackToSearch();});};ProductComparison.prototype.RemoveItemComparisonPage=function(product_id){var comparisonItems=this.comparisonItems;comparisonItems=comparisonItems.filter(function(value,index,arr){return value!=product_id;});this.comparisonItems=comparisonItems;$.cookie('h_comparison',JSON.stringify(comparisonItems),{path:'/'});var comparisonItemsList=comparisonItems.join(",");window.location="/product-comparison?product_id="+comparisonItemsList+"&search-url="+this.backlink;};ProductComparison.prototype.BackToSearch=function(){window.location=this.backlink;};ProductComparison.prototype.addRemoveCompare=function(linkElement){var thisObj=this;var productId=linkElement.attr('data-product-id');this.addRemoveFromComparisonList(productId);this.displayCompareButton(linkElement);this.displayComparePageLink();};ProductComparison.prototype.displayCompareButton=function(linkElement){var productId=linkElement.attr('data-product-id');if(this.comparisonItems.indexOf(productId)>=0){linkElement.attr('action','remove');linkElement.text(Drupal.t('Remove from Comparison'));}else{linkElement.attr('action','compare');linkElement.text(Drupal.t('Compare'));}
linkElement.show();};ProductComparison.prototype.getUrlVars=function()
{var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf('?')+1).split('&');for(var i=0;i<hashes.length;i++)
{hash=hashes[i].split('=');vars.push(hash[0]);vars[hash[0]]=hash[1];}
return vars;};ProductComparison.prototype.displayComparePageLink=function(){if(this.comparisonItems.length>1){var comparisonItemList=this.comparisonItems.join(',');var btn=$(".product-comparison-btn a");if(btn.length==0){return;}
var btnText=Drupal.t('Compare')+' '+this.comparisonItems.length+' '+Drupal.t('Products');var btnLink=btn.attr('href').split('?')[0];btnLink+='?product_id='+comparisonItemList;btn.attr('href',btnLink).text(btnText);$(".product-comparison-btn").show();}else{$(".product-comparison-btn").hide();}};ProductComparison.prototype.getComparisonList=function(){var comparisonItems=$.cookie('h_comparison');if(comparisonItems==null){comparisonItems=[];}else{comparisonItems=JSON.parse(comparisonItems);}
return comparisonItems;};ProductComparison.prototype.addRemoveFromComparisonList=function(product_id){var comparisonItems=this.comparisonItems;if(comparisonItems.indexOf(product_id)>=0){comparisonItems=comparisonItems.filter(function(value,index,arr){return value!=product_id;});}else{comparisonItems.push(product_id);}
this.comparisonItems=comparisonItems;$.cookie('h_comparison',JSON.stringify(comparisonItems),{path:'/'});};}(jQuery));
/* Source and licensing information for the above line(s) can be found at https://www.helmerinc.com/themes/custom/helmer_web/js/product_comparison.js. */;
/* Source and licensing information for the line(s) below can be found at https://www.helmerinc.com/themes/custom/helmer_web/js/distributer.js. */
(function($,Drupal){'use strict';Drupal.behaviors.helmer_web_distributor_locator_page={attach:function(context,settings){$(context).find("#views-exposed-form-distributor-locator-page-1").once("distributor-locator-form-init").each(function(){let form=$(context);$(context).on('change','#edit-field-service-area-country-code',function(e){$('#edit-field-service-area-administrative-area').val('');$(".views-exposed-form").submit();});$(context).on('change','#edit-field-service-area-administrative-area',function(e){$(".views-exposed-form").submit();});});}};})(jQuery,Drupal);
/* Source and licensing information for the above line(s) can be found at https://www.helmerinc.com/themes/custom/helmer_web/js/distributer.js. */;
